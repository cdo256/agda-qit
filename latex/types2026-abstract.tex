% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\documentclass[a4paper,UKenglish,cleveref, autoref, thm-restate]{lipics-v2021}
\usepackage{mathpartir}
\usepackage{amsmath}
\bibliographystyle{plainurl}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\title{Constructing QITs from Quotients}

\author{Thorsten Altenkirch}{University of Nottingham, UK}{thorsten.altenkirch@nottingham.ac.uk}{https://orcid.org/0000-0002-6582-5025}{}
\author{Christina O'Donnell}{University of Nottingham, UK}{psxco3@nottingham.ac.uk}{[ORCID]}{Supported by the Engineering and Physical Sciences Research Council (EPSRC) Doctoral Landscape Award [Grant Ref: EP/YXXXXXX/1].}

\authorrunning{T. Altenkirch and C. D. O'Donnell}
\Copyright{Thorsten Altenkirch and Christina O'Donnell}

\ccsdesc[500]{Theory of computation~Type theory}
\ccsdesc[300]{Theory of computation~Constructive mathematics}
\ccsdesc[300]{Theory of computation~Logic and verification}

\keywords{Quotient Inductive Types, W-Types, Homotopy Type Theory, Agda, Constructive Mathematics}

% Optional: Link to the ArXiv version or repository if applicable
%\relatedversion{Full version hosted on arXiv: \url{https://arxiv.org/abs/xxxx.xxxxx}}

\supplement{Source code available at \url{https://github.com/cdo256/agda-qit}}

\begin{document}

\maketitle

\section{Motivation}\label{motivation}

Quotient Inductive Types (QITs) are a central mechanism for specifying
datatypes equipped with identifications in set-truncated Homotopy Type
Theory~\cite{hott2013-book}. They support a wide range of fundamental
constructions, including the HoTT reals~\cite{hott2013-book}, partiality
monads~\cite{altenkirch2017-partiality-monad}, and ordinal-like
structures.

Despite their expressive power, QITs present significant foundational
difficulties. Shulman and Lumsdaine established a no-go theorem showing
that certain QITs, including Brouwer's standard definition of the
countable ordinals, cannot be constructed using quotients alone
\cite{lumsdaine2020-semantics-higher-inductive}. This suggests that some
form of infinitary principle or choice is unavoidable in a constructive
metatheory, at least in the general case.

Fiore, Pitts, and Steenkamp subsequently showed that a broad class of
QITs, which they call Quotient-W Types (QW types), admit an initial
algebra semantics assuming the Weak Initial Set of Covers principle
(WISC)~\cite{fiore2022-quotients-inductive-types}. Their result recovers
many important examples, including the extensional countable ordinals.
However, WISC remains a non-constructive choice principle
\cite{vandenberg2012-wisc-axiom}, and its necessity is poorly
understood. In particular, it is unclear which features of a QIT
genuinely require choice, and which arise from limitations of existing
proof techniques.

This leads to our central research question:

\begin{quote}
Which quotient-W types can be constructed fully constructively, without
assuming any form of choice?
\end{quote}

Our approach is to study one of the simplest infinitary examples
previously thought to require choice, in order to isolate the essential
use of WISC. We aim to show that this example admits an initial
QW-algebra, that is, a structure supporting a unique recursor
(morphism between algebras), with no additional identifications beyond
those imposed by the signature. We formalised this example in Agda and
traced precisely where WISC is used in the Fiore--Pitts--Steenkamp
construction, with the goal of identifying a weaker, more
constructively justified principle. To our surprise, we found that the
step where Fiore et al.~appeal to WISC can in fact be carried out fully
constructively. We therefore postulate that a large class of QITs can be
exhibited constructively.

\section{Mobiles}

The example we chose---\emph{mobiles}---has just two point constructors
and one path constructor, making it substantially simpler than other
challenging cases, while still being considered difficult from a
constructability standpoint.

We define mobiles as well-founded trees quotiented by permutation at
each level. Concretely,

$$
\begin{array}{l@{\; }l@{\quad}l}
  \multicolumn{3}{l}{\textbf{data } \mathsf{Mobile} : \mathcal{U} \textbf{ where}} \\
  \quad \mathsf{leaf}        & : \mathsf{Mobile} \\
  \quad \mathsf{node}(f)     & : \mathsf{Mobile}                                  & \forall f : \mathsf{Mobile}^I \\
  \quad \mathsf{perm}(\pi,f) & : \mathsf{node}(f) = \mathsf{node}(f \circ \pi) & \forall \pi : I \cong I ;\, f : \mathsf{Mobile}^I
\end{array}
$$

for some $I : \mathcal{U}$, where $\mathsf{Mobile}^I$ denotes functions
from the branching index set $I$ to $\mathsf{Mobile}$. This definition
has a clean and compact presentation, in contrast to other examples
which require auxiliary datatypes or stronger recursion principles.
Unlike ordinal constructions, permutation does not involve recursive
inspection of subtrees.

\section{Main Idea}\label{main-idea}

We briefly recall the framework of quotient-W types introduced by Fiore,
Pitts, and Steenkamp~\cite{fiore2022-quotients-inductive-types}. A QW
signature consists of a container (representing branching structure)
and a set of equations over that container. From such a signature, Fiore
et al.~construct a diagram of approximations indexed by a size
structure. Intuitively, this diagram represents successive stages of the
quotient construction, where each stage captures the proofs available
within a bounded depth. The desired QW type is obtained as the colimit
$Q$ of this diagram.

Fiore et al.~show that this diagram yields an initial algebra, hence
supporting a unique recursor. Their proof relies essentially on WISC,
notably to establish \emph{cocontinuity}, meaning that forming
constructors commutes with quotienting and that $Q$ is closed under all
constructors.

Concretely, WISC is used to select covers that bound the family of
subtrees, enabling the construction of inverse maps witnessing the
required isomorphism.

Our work revisits this step. We observe that the need for WISC arises
precisely when equations allow arbitrarily deep inspection of terms, as
in the extensional ordinal example. When all equations are
\emph{depth-bounded}, the required coherence data can instead be
constructed by well-founded recursion on a fixed ordinal bound
$\alpha$, avoiding any appeal to choice. As a consequence, we obtain a
fully constructive construction of infinite mobiles.

We exploit the fact that every defining equation for mobiles preserves
tree depth. Thus, if two trees are equal, they must occur at the same
depth, and can be compared without traversing intermediate terms of
unbounded depth~\cite{pitts2021-inflationary-iteration}.

\section{Conclusion}\label{conclusion}

We identify bounded locality as a structural criterion characterising
which quotient-W types admit fully constructive constructions. This
explains when choice principles such as WISC are genuinely necessary,
and when they can be avoided. Our results show that many infinitary
quotients previously thought to require choice are, in fact,
constructible in a purely constructive setting.

Our work builds on the QW framework of Fiore, Pitts, and
Steenkamp~\cite{fiore2022-quotients-inductive-types}, and complements
the no-go results of Shulman and
Lumsdaine~\cite{lumsdaine2020-semantics-higher-inductive}. It is also
related to Pitts and Steenkamp's notion of infinitary
inflation~\cite{steenkamp2021-phd-thesis}, which similarly isolates
sources of non-constructivity in inductive definitions.

Future directions include formalising the locality theorem stated above
and extending the analysis to indexed QW
types~\cite{altenkirch2018-quotient-inductive-inductive}.

\bibliography{master}

\end{document}
